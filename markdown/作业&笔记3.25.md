# **作业&笔记3.25**

## **URL:**

URL由三部分组成：资源类型、存放资源的主机域名、资源文件名。url是统一资源定位符，对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示，是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。

URL的一般语法格式为(带方括号[]的为可选项)：protocol :// hostname[:port] / path / [;parameters][?query]#fragment

即：*协议类型://服务器地址[:端口号]/路径/文件名[参数=值]。*

**格式说明：**

1、protocol（协议）：指定使用的传输协议，下表列出 protocol 属性的有效方案名称。 最常用的是**HTTP**协议，它也是目前WWW中应用最广的协议。

2、hostname（主机名）：是指存放资源的服务器的域名系统(DNS) 主机名或 IP 地址。如：www.baidu.com有时，在主机名前也可以包含连接到服务器所需的用户名和密码（格式：username:password@hostname）。**注意和域名区分，域名：baidu.com**

3、port（端口号）：整数，可选，*省略时使用方案的默认端口*，各种传输协议都有默认的端口号，如http的默认端口为80。如果输入时省略，则使用默认端口号。有时候出于安全或其他考虑，可以在服务器上对端口进行重定义，即采用非标准端口号，此时，URL中就不能省略端口号这一项。

4、path（路径）：host后面的部分，由零或多个“/”符号隔开的字符串，一般用来表示主机上的一个目录或文件地址。

5、parameters（参数）：这是用于指定特殊参数的可选项。

6、query(查询)：可选，用于给动态网页（如使用CGI、ISAPI、PHP/JSP/ASP/ASP。NET等技术制作的网页）传递参数，可有多个参数，用“&”符号隔开，每个参数的名和值用“=”符号隔开。

7、fragment（信息片断）：字符串，用于指定网络资源中的片断。例如一个网页中有多个名词解释，可使用fragment直接定位到某一名词解释。

## Linux ps与top命令**

这两个命令都是查看系统进程信息的命令，但是用处有点儿不同

**1.ps命令--提供系统过去信息的一次性快照**

也就是说ps命令能够查看刚刚系统的进程信息，命令：ps aux或者ps lax

![截屏2020-03-25下午2.07.21](作业&笔记3.25.assets/截屏2020-03-25下午2.07.21.png)

解释如下：

VSZ--进程的虚拟内存大小

RSS--驻留集的大小，可以理解为内存中页的数量

TTY--控制终端的ID

STAT--也就是当前进程的状态，其中S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等

STRAT--这个很简单，就是该进程启动的时间

TIME--进程已经消耗的CPU时间，注意是消耗CPU的时间

COMMOND--命令的名称和参数

**ps lax 可以看到父进程，谦让值以及该进程正在等待的资源等待**

**ps aux 查看系统所有进程数据(静态) USER:该进程属于哪个用户账号的；**

**2.top命令反应的是系统进程动态信息，默认10s更新一次**

顶部始终显示的是系统**当前最活跃**的进程，此时还可以接受用户的键盘输入向进程发送信号等待

ps和top都是从/proc目录下读取进程的状态信息，内核把当前系统进程的各种有用信息都放在这个伪目录下。

## **作业一：**

### **复习题**

8. **在周末，Alice经常要通过她的笔记本电脑访问保存在办公室台式机上的文件。上周她在办公室台式机上安装了一个FTP服务器程序的副本，在家里的笔记本电脑上安装了FTP客户机程序的副本。她很失望周末无法访问到她的文件。这可能出现什么差错了?**

   1. 局域网没有外网ip
   2. 没开机
   3. 公司防火墙阻止了

9. **大多数安装在个人计算机上的操作系统带有几个客户端进程，但通常没有服务器进程，请解释原因。**

   因为个人计算机通常不用作服务器，服务器有专门的服务器操作系统
   
   *服务器一般是用的Linux系统*
   
   *服务器进程：提供服务的程序*
   
   *客户端进程：需要访问外部的资源*
   
   *个人操作系统是给个人使用的，一般不需要外部进程*

### **练习题**

3. **假设连接到因特网的主机在2010年是5亿台。这个数字以每年20%的速度增长，到2020年主机数量是多少?**

   5*1.2<sup>10</sup>=30.95亿

9. **比较16位端口地址(0〜65535)和32位IP地址(0〜4294967295)的范围，为什么我们需要IP地址有如此大的范围，但端口号却相对范围小呢?**

   端口地址是标识一台计算机的通讯的进程的 IP地址是标识全球计算机的，用于寻址的
   
   端口号+IP地址-》socket -> TCP/UDP
   
   提供http服务的->80/8080

**补充题：解释浏览器输入 www.baidu.com并回车到底发生了些什么？**

**第一步：浏览器输入域名**

*例如输入域名：baidu.com，注意www.baidu.com不是域名，是个host地址*

**第二步：浏览器查找域名的IP地址**

若是第一次访问的网站，ISP的DNS服务器就会进行递归查询，所谓递归查询就是如果主机所询问的本地域名服务器不知道被查询域名的IP地址，那么本地域名服务器就以DNS客户的身份，向其他根域名服务器继续发出查询请求报文，而不是让该主机自己进行下一步查询。

**第三步 ：浏览器与目标服务器建立TCP连接**

1.主机浏览器通过DNS解析得到了目标服务器的IP地址后，与服务器建立TCP连接。

2.TCP3次握手连接：浏览器所在的客户机向服务器发出连接请求报文（SYN标志为1）；服务器接收报文后，同意建立连接，向客户机发出确认报文（SYN，ACK标志位均为1）；客户机接收到确认报文后，再次向服务器发出报文，确认已接收到确认报文；此处客户机与服务器之间的TCP连接建立完成，开始通信。

**第四步：浏览器通过http协议发送请求**

浏览器向主机发起一个HTTP-GET方法报文请求。请求中包含访问的URL，也就是http://www.baidu.com/ （*+path*）,KeepAlive，长连接，还有User-Agent用户浏览器操作系统信息，编码等。

**第五步：服务器处理请求**

服务器接收到获取请求，然后处理并返回一个响应。

**第六步：服务器发出一个HTML响应**

服务器可以响应请求，返回报文，由于在报头中Content-type为“text/html”，浏览器以HTML形式呈现，而不是下载文件。

**第七步：释放TCP连接**

*本地pc1 (ip1 + port1端口号)             之间建立tcp连接                baidu(ip_baidu + 80端口号)*

1.浏览器所在主机向服务器发出连接释放报文，然后停止发送数据；

2.服务器接收到释放报文后发出确认报文，然后将服务器上未传送完的数据发送完；

3.服务器数据传输完毕后，向客户机发送连接释放报文；

4.客户机接收到报文后，发出确认，然后等待一段时间后，释放TCP连接；

**第八步：浏览器显示页面**

在浏览器没有完整接受全部HTML文档时，它就已经开始显示这个页面了，浏览器接收到返回的数据包，根据浏览器的渲染机制对相应的数据进行渲染。渲染后的数据，进行相应的页面呈现和脚步的交互。

**第九步：浏览器发送获取嵌入在HTML中的其他内容**

比如一些样式文件，图片url，js文件url等，浏览器会通过这些url重新发送请求，请求过程依然是HTML读取类似的过程，查询域名，发送请求，重定向等。

## **作业二**

### **复习题**

9. **为什么操作系统需要队列?**

   有很多的作业和进程相互竞争计算机资源。例如，当一些作业进入内存时，其他的就必须等待直到有了可用空间。或者当一个进程正在使用CPU时，其他进程就必须等待直到CPU空闲为止。为处理多个进程和作业，进程管理器使用队列

10. **死锁和饿死有何区别?**

    当操作系统没有对进程的资源进行限制时将会发生**死锁**。

    **饿死**是一种与死锁相反的情况。它发生在当操作系统对进程分配资源有太多限制的时候。

### **练习题**

9. 三个进程(A、B和C)同时运行，进程A占用File1但需要File2。进程B占用File3但需要File1。进程C占用File2但需要File3。为这几个进程画一个框图。这种情况是不是死锁?

   ![截屏2020-03-25下午5.07.56](作业&笔记3.25.assets/截屏2020-03-25下午5.07.56.png)

是死锁

10. 三个进程(A、B和C)同时运行，进程A占有File1，进程B占有File2但需要File1,进程C占有File3但需要File2。为这几个进程画一个框图。这种情况是不是死锁?如果不是，说明进程怎样最后完成它们的任务。

![截屏2020-03-25下午5.08.02](作业&笔记3.25.assets/截屏2020-03-25下午5.08.02.png)

不是死锁，进程A先被执行并释放File1，接着进程B被执行并释放file2，进程C被执行释放file3